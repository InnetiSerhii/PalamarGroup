<md-toolbar class="md-hue-2">
    <div class="md-toolbar-tools md-padding ">
        <h2 class=" md-padding "> Створити модуль</h2>
        <span flex></span>
    </div>
</md-toolbar>
<form name="createCorseForm" class="md-padding " novalidate ng-submit="vm.createCourse(createCorseForm)">
    <md-content>
        <md-input-container class="md-block ">
            <md-checkbox ng-model="vm.newCourseModel.isVisible" aria-label="Чи паказати?">
                Показати на сайті
            </md-checkbox>
        </md-input-container>
        <md-input-container class="md-block ">
            <label for="name">Назва</label>
            <input id="name" ng-model="vm.newCourseModel.name" name="name"/>
            <!--TODO validation-->
        </md-input-container>
        <md-input-container class="md-block">
            <label>Опис</label>
            <input ng-model="vm.newCourseModel.description" id="description" name="description">
        </md-input-container>
        <md-input-container class="md-block ">
            <label for="order">Порядок відображення</label>
            <input id="order" ng-model="vm.newCourseModel.order" name="order" type="number"/>

        </md-input-container>
        <md-input-container class="md-block ">
            <label for="price">Ціна</label>
            <input id="price" ng-model="vm.newCourseModel.price" name="price" type="number"/>
        </md-input-container>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <!--dates-->
        <md-list flex>
            <md-subheader class="md-no-sticky">Дати модулів</md-subheader>
            <md-list-item class="md-1-line" ng-repeat="date in vm.newCourseModel.courseModulesDates track by $index">
                <md-datepicker ng-model="date" disabled="true"></md-datepicker>
                <md-button class="  md-raised" ng-click="vm.deleteFromList(vm.newCourseModel.courseModulesDates,date)">
                    Видалити
                </md-button>
            </md-list-item>
        </md-list>
        <label for="price">Додати дату</label>
        <md-datepicker ng-model="vm.newCourseModel.newDateModel"></md-datepicker>
        <md-button class="md-raised" ng-click="vm.saveModuleDate(vm.newCourseModel,vm.newCourseModel.newDateModel)">
            Зберегти
        </md-button>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <!--author-->
        <md-input-container class="md-block">
            <label>Їм`я автора</label>
            <input ng-model="vm.newCourseModel.author.name" id="author-name" name="author-name">
        </md-input-container>
        <div>
            <label for="price">Фото автора</label>
            <div>
                <img ng-src="{{vm.newCourseModel.author.photourl}}"/>
                <br/>
                <md-button ng-if="!vm.showAuthorPhotoUpload" class="md-raised" ng-click="vm.showAuthorPhotoUpload=true">
                    Змінити фото автора
                </md-button>
                <div ng-if="vm.showAuthorPhotoUpload">
                    <input type="file" ngf-select ng-model="authorPhotoFile" name="authorPhotoFile"
                           accept="image/*" required/>

                    <!--TODO: add validation-->
                    <md-button class="md-raised" ng-disabled="!authorPhotoFile"
                               ng-click="vm.uploadAuthorPhoto(authorPhotoFile,vm.newCourseModel)">Завантажити
                    </md-button>
                </div>
            </div>
        </div>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <!--hearForm-->
        <md-list flex>
            <md-subheader class="md-no-sticky">Форми модулів</md-subheader>
            <md-list-item class="md-1-line" ng-repeat="item in vm.newCourseModel.hearFormsPhotos track by $index"
                          ng-click="null">
                <img ng-src="{{item.url}}"/>
                <div layout="column">
                    <md-input-container class="md-block  ">
                        <label for="name">Назва форми</label>
                        <input id="photoName" ng-model="item.name" name="photoName"/>
                    </md-input-container>
                    <md-input-container class="md-block  ">
                        <label for="ord">Порядок відображення</label>
                        <input id="ord" ng-model="item.order" type="number"/>
                    </md-input-container>
                    <md-button class="  md-raised"
                               ng-click="vm.deleteFromList(vm.newCourseModel.hearFormsPhotos,item)">
                        Видалити
                    </md-button>
                </div>
            </md-list-item>
        </md-list>
        <div>
            <md-button ng-if="!vm.showFormPhotoUpload" class="md-raised" ng-click="vm.showFormPhotoUpload=true">
                Додати форму
            </md-button>
            <div ng-if="vm.showFormPhotoUpload">
                <input type="file" ngf-select ng-model="hearFormsFile" name="hearFormsFile"
                       accept="image/*" required/>
                <md-button class="md-raised" ng-disabled="!createCorseForm.$valid"
                           ng-click="vm.uploadCollPhoto(hearFormsFile,vm.newCourseModel.hearFormsPhotos,vm.showFormPhotoUpload)">
                    Завантажити
                </md-button>
            </div>
        </div>
        <md-divider></md-divider>
        <md-divider></md-divider>
        <!--history-->
        <md-list flex>
            <md-subheader class="md-no-sticky">Форми історії попередніх модулів</md-subheader>
            <md-list-item class="md-1-line" ng-repeat="item in vm.newCourseModel.historyPhotos" ng-click="null">
                <img ng-src="{{item.url}}"/>
                <div layout="column">
                    <md-input-container class="md-block  ">

                        <label for="name">Назва форми</label>
                        <input id="historyNme" ng-model="item.name" name="historyNme"/>
                    </md-input-container>
                    <md-input-container class="md-block  ">
                        <label for="ord">Порядок відображення</label>
                        <input id="orvd" ng-model="item.order" type="number"/>
                    </md-input-container>
                    <md-button class="  md-raised"
                               ng-click="vm.deleteFromList(vm.newCourseModel.historyPhotos,item)">
                        Видалити
                    </md-button>
                </div>
            </md-list-item>
        </md-list>
        <div>
            <md-button ng-if="!vm.showHistoryPhotoUpload" class="md-raised" ng-click="vm.showHistoryPhotoUpload=true">
                Додати фото історії
            </md-button>
            <div ng-if="vm.showHistoryPhotoUpload">
                <input type="file" ngf-select ng-model="historyPhotoFile" name="historyPhotoFile"
                       accept="image/*" required/>
                <!--TODO: add validation-->
                <md-button class="md-raised" ng-disabled="!historyPhotoFile"
                           ng-click="vm.uploadCollPhoto(historyPhotoFile,vm.newCourseModel.historyPhotos,vm.showHistoryPhotoUpload)">
                    Завантажити
                </md-button>
            </div>
        </div>
    </md-content>
    <div layout="row" md-whiteframe="4">
        <md-button class="md-raised md-primary" ng-click="vm.showCourseCreateForm = false">Скасувати</md-button>
        <md-button type="submit" class="md-raised md-accent">Зберегти</md-button>
    </div>
</form>

